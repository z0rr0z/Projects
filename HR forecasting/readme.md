# Предсказание уровня удовлетворённости сотрудников и вероятности их увольнения

[ipynb](hr_foreasting.ipynb)

## Описание проекта

**Цель:** Построить модели для прогнозирования уровня удовлетворённости сотрудников и вероятности их увольнения.

**Задачи (этапы) исследования:**
1. Задача 1: предсказание уровня удовлетворённости сотрудника
    1. Провести загрузку и общий обзор данных.
    2. Провести предобработку данных, в т.ч.:
        - выявить и устранить пропуски;
        - выявить и устранить явные и неявные дубликаты в данных;
        - изменить типы данных при необходимости.
    3. Провести исследовательский анализ данных, в т.ч.:
        - провести статистический анализ признаков;
        - изучить параметры и устранить аномальные значения.
    4. Провести подготовку данных, в т.ч.:
        - провести масштабирование количественных признаков;
        - провести кодирование качественных признаков.
    5. Построить модель удовлетворённости сотрудника, в т.ч.:
        - сформировать пайплайн;
        - определить целевую метрику - SMAPE;
        - осуществить подбор лучшей модели и ее гиперпараметров исходя из целевой метрики (SMAPE должна быть не более 15).
2. Задача 2: предсказание увольнения сотрудника
    1. Провести загрузку и общий обзор данных.
    2. Провести предобработку данных, в т.ч.:
        - выявить и устранить пропуски;
        - выявить и устранить явные и неявные дубликаты в данных;
        - изменить типы данных при необходимости.
    3. Провести исследовательский анализ данных, в т.ч.:
        - провести статистический анализ признаков;
        - изучить параметры и устранить аномальные значения;
        - составить портрет «уволившегося сотрудника»;
        - изучить взаимосвязь уровня уровня удовлетворённости сотрудника работой и вероятности его увольнения.
    4. Добавить в набор признаков новый, отражающий предсказаннвй уровень удовлетворённости сотрудника работой.
    4. Провести подготовку данных, в т.ч.:
        - провести масштабирование количественных признаков;
        - провести кодирование качественных признаков.
    5. Построить модель удовлетворённости сотрудника, в т.ч.:
        - сформировать пайплайн;
        - определить целевую метрику - ROC-AUC;
        - осуществить подбор лучшей модели и ее гиперпараметров исходя из целевой метрики (ROC-AUC должен быть не менее 0,91).
3. Сформировать итоговые заключения и рекомендации заказчику.

## Навыки и инструменты

- **python**
- **pandas**
- **scikit-learn**
- **matplotlib**
- **seaborn**
- **phik**
- **shap**

## Выводы

Мы построили модели для предсказания уровня удовлетворённости сотрудника и предсказания увольнения сотрудника из компании.

В рамках проведенной работы мы осуществили загрузку и предобработку данных, затем провели исследовательский анализ, корреляционный анализ, подобрали лучшие модели и их гиперпараметры в соответсвии с целевыми метриками, провели анализ важности признаков. Также составили портрет "уволившегося сотрудника".

Работа разбита на 2 задачи, которые имеют общие этапы.

В ходе **предобработки данных** в обеих задачах мы:
- исправили грамматические ошибки в значениях признаков;
- сформировали пайплайн для обработки пропусков.

В ходе **исследовательского анализа** мы:
- в рамках предсказания уровня удовлетворённости сотрудника установили, что сотрудники с более высокой удовлетворенностью работой в отличие от сотрудников с низкой удовлетворенностью работой в среднем: имеют больший стаж работы, более высокую зарплату, а самое главное - более высокую оценку руководителя; также среди них ниже доля нарушивших трудовой договор;
- в рамках предсказания увольнения сотрудника из компании установили, что в основном увольняются сотрудники с более низкой зарплатой; со стажем 1-3 года, причем в первый год доля уволившихся максимальна (60%); чаще увольняются сотрудники с оценкой руководителя 1-3 (более 40%); сотрудники отдела HR увольняются чуть реже остальных (25%); практически не увольняются сотрудники, получившие продвижение по службе, но таких очень мало (2,8% от общей численности); часто увольняются те, кто имели нарушения трудового договора (более 40%); увольняются в основном джуны (более 51%) и сотрудники с низкой нагрузкой (43%).
- установили, что вероятность увольнения связана с уровнем удовлетворенности работой: в среднем у уволившихся сотрудников были более низкие значения уровня удовлетворенности.

При **построении и анализе моделей** мы:
- с помощью пайплайнов подобрали лучшие (по заданным целевым метрикам - SMAPE и ROC-AUC соответственно) модели для каждой задачи и их гиперпараметры: в обоих случаях это модели на основе дерева решений;
- установили, что в лучшей модели предсказания уровня удовлетворённости наибольшее влияние на целевой признак имеют следующие параметры: оценка руководителя, стаж работы, уровень должности, заработная плата и наличие нарушений трудового договора;
- рассчитали метрику SMAPE для модели предсказания уровня удовлетворённости на тестовых данных - она составила 14.527, что соответствует требованиям заказчика;
- выявили нетривиальный факт обратной зависимости удовлетворенности от уровня должности, что, возможно, объясняется несовершенством системы мотивации и продвижения;
- установили, что в лучшей модели предсказания увольнения сотрудника наибольшее влияние на целевой признак имеют следующие параметры: число лет работы, уровень должности, предсказанный уровень удовлетворенности, нагрузка и заработная плата;
- рассчитали метрику ROC-AUC для модели предсказания увольнения сотрудника на тестовых данных - она составила 0.9227, что соответствует требованиям заказчика;
- установили, что исключение признаков, которые незначительно влияют на целевой, в модели предсказания увольнения не приводит к увеличению ее качества.
